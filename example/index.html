<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>http-mock-json-server</title>
  <script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <style>
    pre {outline: 1px solid #ccc;padding: 5px;margin: 5px;}
    .string {color: green;}
    .number {color: darkorange;}
    .boolean {color: blue;}
    .null {color: magenta;}
    .key {color: red;}
  </style>
  <script>
    function output(obj,inp) {
      var pre = $("<pre>").html(inp);
      obj.append(pre);
    }

    function syntaxHighlight(json) {
      json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
      return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
        var cls = 'number';
        if (/^"data\:image/.test(match)){
          cls = 'image'
        } else if (/^"/.test(match)) {
          if (/:$/.test(match)) {
            cls = 'key';
          } else {
            cls = 'string';
          }
        } else if (/true|false/.test(match)) {
          cls = 'boolean';
        } else if (/null/.test(match)) {
          cls = 'null';
        }

        if(cls == 'image')
          return '<span class="' + cls + '"><img src=' + match + '></span>';
        return '<span class="' + cls + '">' + match + '</span>';
      });
    }

    function getJSON(url,obj){
      $.getJSON(url)
        .done(function(data){
          console.log(data);
          output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
        });
    }

    function jsonp(url,obj){
      $.ajax({
        url:url,
        dataType:'jsonp'
      }).done(function(data){
          console.log(data);
          output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
        });
    }

    function getProxy(obj){
      $.ajax({
        url:'http://api.example.com/get/proxy',
        method: "GET",
        data: {
          name: 'eagle',
          password: 'xxxxxxx'
        },
        dataType:'json'
      }).done(function(data){
          console.log(data);
          output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
        });
    }

    function postProxy(obj){
      $.ajax({
        url:'http://api.example.com/post/proxy',
        method: "POST",
        data: {
          name: 'eagle',
          password: 'xxxxxxx'
        },
        dataType:'json'
      }).done(function(data){
          console.log(data);
          output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
        });
    }

  </script>
</head>

<body>
  <div class="container">
    <h1>模拟请求api.example.com的接口</h1>
  </div>
  <div class="container">
    <h4>1. mock http://api.example.com/test</h4>
    <div>
      <input class="btn btn-default" onclick="getJSON('http://api.example.com/test',this)" type="button" value="click me">
    </div>
  </div>
  <div class="container">
    <h4>2. mock http://api.example.com/test/deep/path</h4>
    <div>
      <input class="btn btn-default" onclick="getJSON('http://api.example.com/test/deep/path',this)" type="button" value="click me">
    </div>
  </div>
  <div class="container">
    <h4>3. mock jsonp</h4>
    <pre>
  function jsonp(url,obj){
    $.ajax({
      url:url,
      dataType:'jsonp'
    }).done(function(data){
      console.log(data);
      output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
    });
  }
    </pre>
    <input class="btn btn-default" onclick="jsonp('http://api.example.com/test/deep/path',this)" type="button" value="click me">
  </div>
  <div class="container">
    <h4>4. https get proxy</h4>
    <pre>
  function getProxy(obj){
    $.ajax({
      url:'https://api.github.com/',
      method: "GET",
      dataType:'json'
    }).done(function(data){
      console.log(data);
      output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
    });
  }
    </pre>
    <input class="btn btn-default" onclick="getProxy(this)" type="button" value="click me">
  </div>
  <div class="container">
    <h4>5. post proxy</h4>
    <pre>
  function getProxy(obj){
    $.ajax({
      url:'http://api.example.com/post/proxy',
      method: "POST",
      data: {
        name: 'eagle',
        password: 'xxxxxxx'
      },
      dataType:'json'
    }).done(function(data){
      console.log(data);
      output($(obj).parent(),syntaxHighlight(JSON.stringify(data, null, 4)));
    });
  }
    </pre>
    <input class="btn btn-default" onclick="postProxy(this)" type="button" value="click me">
  </div>

</body>

</html>